# ğŸ Wichtel Online - Kompletter Workflow

## Ãœbersicht

Eine **Wichtelgruppe** lÃ¤uft in 4 Phasen ab:

1. **Phase 1: Gruppe erstellen** (Organisator) â†’ Organisator-Dashboard
2. **Phase 2: Teilnehmer beitreten & Geschenkeliste eintragen** (Alle Teilnehmer)
3. **Phase 3: Auslosen** (Organisator) â†’ Jeder sieht seinen Wichtel-Partner
4. **Phase 4: Geschenkeliste des Partners anschauen** (Alle Teilnehmer)

---

## Phase 1: Gruppe Erstellen (Organisator)

### Schritt 1.1: Setup starten
1. Gehe zur Startseite: https://julklapp-online.vercel.app/
2. Klick auf "âœ… Neue Wichtelgruppe anlegen"
3. Folge dem 6-Schritte-Wizard:
   - **Schritt 1**: Anlass wÃ¤hlen (Weihnachten, Geburtstag, etc.)
   - **Schritt 2**: Gruppennamen & Enddatum festlegen
   - **Schritt 3**: Dein Name & Email eingeben
     - Optional: "Ich mÃ¶chte auch am Wichteln teilnehmen" âœ…
   - **Schritt 4**: Teilnehmer einladen (Namen + optional Email)
   - **Schritt 5**: Budget festlegen (z.B. 30â‚¬)
   - **Schritt 6**: Einladungstext schreiben

### Schritt 1.2: Organisator-Dashboard
Nach der Erstellung wirst du automatisch zum **Organisator-Dashboard** weitergeleitet.

Hier siehst du:
- ğŸ”— **Dein Organisations-Link** (um jederzeit den Ãœberblick zu behalten)
- ğŸ“§ **"Per Email senden"** Button
  - Ã–ffnet dein lokales Email-Programm
  - Mit vorgefÃ¼lltem Link zur deinem Dashboard
  - Du kannst die Email an dich selbst senden zum Bookmarken

**ğŸ’¡ Tipp:** Speichere den Link als **Lesezeichen** (Strg+D / Cmd+D), damit du schnell zurÃ¼ckkommen kannst!

---

## Phase 2: Teilnehmer Beitreten & Geschenkelisten

### Schritt 2.1: Teilnehmer-Link teilen
Der Organisator erhÃ¤lt einen **Teilnehmer-Link** auf dem Dashboard:
- Format: `https://julklapp-online.vercel.app/join/[GRUPPE_ID]`
- Teile diesen Link mit allen Teilnehmern (Email, WhatsApp, etc.)

### Schritt 2.2: Teilnehmer beitreten
Jeder Teilnehmer:
1. Klickt auf den Link `/join/[GRUPPE_ID]`
2. WÃ¤hlt seinen Namen aus der Liste (oder gibt ihn neu ein)
3. BestÃ¤tigt seinen Namen
4. **Schritt 3: Exclusions** - WÃ¤hlt aus, wem man NICHT geschenkt bekommen mÃ¶chte
   - Beispiel: "Ich mÃ¶chte nicht von meinem Partner XXX auslosen werden"
   - Max. AusschlÃ¼sse: 1-2 (je nach GruppengrÃ¶ÃŸe)
5. BestÃ¤tigt die Exclusions â†’ Geht zu Schritt 4

### Schritt 2.3: Geschenkeliste eintragen
Jeder Teilnehmer trÃ¤gt seine Wunschliste ein.

**Option A: Amazon-Produkte manuell hinzufÃ¼gen** (Empfohlen!)

1ï¸âƒ£ Gehe auf [amazon.de](https://amazon.de)
2ï¸âƒ£ Suche dein Wunschprodukt (Nutze Filter um Preis auf Budget zu begrenzen)
3ï¸âƒ£ Kopiere den Link aus der Adresszeile
   - Beispiel: `https://amazon.de/dp/B08N5WRWNW`
4ï¸âƒ£ **Im Formular:**
   - Paste den Link in das Feld "ğŸ”— Kopiere den Link unten ein"
   - Gib einen aussagekrÃ¤ftigen Namen ein (z.B. "AirPods Pro")
   - Klick "âœ¨ Geschenk hinzufÃ¼gen"

**Option B: Amazon-Produktsuche verwenden** (Automatische VorschlÃ¤ge)
- "ğŸ¯ Geschenkideen durchstÃ¶bern" Button
- WÃ¤hle Kategorie, Geschlecht, Budget
- App schlÃ¤gt echte Amazon-Produkte vor
- Klick "âœ… Zur Liste hinzufÃ¼gen"

**ğŸ’¡ Hinweis:** Der Affiliate-Link wird automatisch hinzugefÃ¼gt - der Organisator erhÃ¤lt eine kleine Provision!

### Wichtig: Geschenkliste muss VOLLSTÃ„NDIG sein!
- Min. 1 Geschenk
- Max. 10 Geschenke
- Alle Felder mÃ¼ssen ausgefÃ¼llt sein

---

## Phase 3: Auslosen (Organisator)

### Voraussetzungen
- âœ… ALLE Teilnehmer haben ihre Geschenkelisten eingetragen
- âœ… Der Organisator sieht auf dem Dashboard: **100% Fertig**

### Auslosen durchfÃ¼hren
1. Gehe zu deinem **Organisator-Dashboard** (Lesezeichen!)
2. Sehe den Fortschritt: "X von Y Teilnehmern fertig"
3. Wenn 100%: Button "ğŸ² Jetzt auslosen" wird aktiviert
4. Klick auf "ğŸ² Jetzt auslosen"
5. **Warnung:** Auslosen kann NICHT rÃ¼ckgÃ¤ngig gemacht werden!
6. BestÃ¤tige

---

## Phase 4: Wichtel-Partner Sehen (Alle Teilnehmer)

Nach dem Auslosen:

### Schritt 4.1: Partner anzeigen
Jeder Teilnehmer Ã¶ffnet die Gruppe nochmal:
- `https://julklapp-online.vercel.app/[GRUPPE_ID]`
- ODER klickt im Teilnehmer-Link weiter

### Schritt 4.2: Wunschliste des Partners anschauen
- **ğŸ Geschenke fÃ¼r [PARTNER_NAME]**
- Zeigt alle Geschenke, die dein Partner sich wÃ¼nscht
- Jedes Geschenk hat einen **Amazon-Link**
  - Klick auf "Auf Amazon anschauen â†’"
  - Gehe shoppen!
  - **Affiliate-Provision** geht an den Organisator

### Was sieht man?
FÃ¼r jeden Artikel:
- ğŸ“ Name des Produkts
- ğŸ’° Preis (falls eingetragen)
- ğŸ“· Bild (if available)
- ğŸ”— Link zu Amazon
- â­ Bewertung (falls Amazon-API aktiv)

---

## Technische Details

### Geschenk-Eintrag Problem behoben âœ…
**Fehler:** "Geschenk wird nicht gespeichert"
**LÃ¶sung:** Gift-API nun mit in-memory Fallback
- Funktioniert lokal OHNE Vercel KV
- Geschenke werden sofort gespeichert
- Beim Reload oder bei Vercel KV wird alles synchronisiert

### Wichtel-Partner Berechnung
- **Algorithmus:** Draw Algorithm (utils/drawAlgorithm.js)
- **AusschlÃ¼sse:** Respektiert Exclusions der Teilnehmer
- **Fair:** Jeder bekommt genau EINEN Partner
- **Eindeutig:** Jeder schenkt an genau EINEN

### Daten-Speicherung
- **Frontend:** localStorage (Session-Daten)
- **Backend:** Vercel KV (Produktiv) + In-Memory Fallback (Entwicklung)
- **Sicherheit:** Keine Passworte nÃ¶tig, nur anonyme IDs

---

## HÃ¤ufig Gestellte Fragen (FAQ)

### F: Wie komme ich zu meinem Organisator-Dashboard zurÃ¼ck?
**A:**
- Speichere den Link als Lesezeichen (Strg+D)
- ODER sende ihn dir selbst per Email (Button im Dashboard)
- Format: `https://julklapp-online.vercel.app/organizer/[GRUPPE_ID]`

### F: Geschenk-Eintrag klappt nicht?
**A:**
- Browser aktualisieren (F5)
- Alle Felder ausfÃ¼llen (Name + Link beide erforderlich)
- Link muss von amazon.de sein
- Browser Console Ã¶ffnen (F12) und Fehler prÃ¼fen

### F: Wie lange bin ich eine "Wunschliste"?
**A:** So lange die Gruppe aktiv ist. Nach Auslosen sehen dich nur noch deine Wichtel-Partner.

### F: Kann ich meine Geschenkeliste Ã¤ndern?
**A:** Ja! Solange nicht ausgelost wurde, kannst du jederzeit:
- Geschenke hinzufÃ¼gen (max. 10)
- Geschenke lÃ¶schen (ğŸ—‘ï¸ Button)
- Bestehende Geschenke NICHT editieren (lÃ¶schen + neu hinzufÃ¼gen)

### F: Was passiert nach dem Auslosen?
**A:**
1. Jeder sieht seinen Partner
2. Jeder sieht die Wunschliste des Partners
3. Amazon-Links funktionieren sofort
4. Man kann einkaufen gehen!

### F: Kann man auslosen rÃ¼ckgÃ¤ngig machen?
**A:** NEIN! Auslosen ist unwiderruflich. Bitte sicherstellen, dass:
- Alle Geschenkelisten fertig sind
- Alle Exclusions gesetzt sind
- Der Organisator es wirklich will!

### F: Was ist der Affiliate-Link?
**A:**
- Der Organisator erhÃ¤lt eine kleine Provision (2-10%) wenn jemand Ã¼ber seinen Link auf Amazon kauft
- FÃ¼r den KÃ¤ufer Ã¤ndert sich NICHTS (gleicher Preis!)
- Nur wenn der Kauf innerhalb von 24 Stunden nach Linkklick stattfindet

---

## Fehlerbehandlung

| Fehler | Ursache | LÃ¶sung |
|--------|--------|--------|
| "Gruppe nicht gefunden" | Falsche Group-ID | Link prÃ¼fen, Organisator fragen |
| "Geschenk wird nicht gespeichert" | API-Fehler | F5 Reload, Browser Cache leeren |
| "Du bist noch nicht angemeldet" | Session expired | Nochmal auf Join-Link klicken |
| "Partner nicht gefunden" | Nicht ausgelost | Warte bis Organisator auslost |
| "Keine Geschenke sichtbar" | Partner hat nicht eingetragen | Warte bis Partner die Liste macht |

---

## Kontakt & Support

Wenn etwas nicht funktioniert:
1. **Browser Console** Ã¶ffnen (F12)
2. Fehler-Meldung copieren
3. Screenshot machen
4. Fehler melden

---

**Viel SpaÃŸ beim Wichteln! ğŸğŸ„**
